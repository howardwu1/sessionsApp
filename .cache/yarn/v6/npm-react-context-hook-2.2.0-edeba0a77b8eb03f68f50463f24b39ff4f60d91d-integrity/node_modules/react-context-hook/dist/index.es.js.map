{"version":3,"file":"index.es.js","sources":["../src/StoreContext.js","../src/redux/actionTypes.js","../src/redux/reducer.js","../src/redux/middleware.js","../src/redux/store.js","../src/redux/actions.js","../src/rawStore.js","../src/defaultConfig.js","../src/withStore.js","../src/redux/util/Subscription.js","../src/useStore.js"],"sourcesContent":["import React from 'react'\nexport default React.createContext(null)\n","export const SET_VALUE = 'SET VALUE'\nexport const REMOVE_VALUE = 'REMOVE VALUE'\nexport const RESET = 'RESET STORE'\n","import { combineReducers } from 'redux'\n\nimport { SET_VALUE, REMOVE_VALUE, RESET } from './actionTypes'\n\nfunction mainReducer(state = {}, action) {\n  switch (action.type) {\n    case SET_VALUE: {\n      const { key, value } = action.payload\n      const newState = {\n        ...state\n      }\n      newState[key] = value\n      return newState\n    }\n    case REMOVE_VALUE: {\n      const { key } = action.payload\n      const newState = {\n        ...state\n      }\n      delete newState[key]\n      return newState\n    }\n    case RESET: {\n      return action.payload\n    }\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({ main: mainReducer })\n","export const logger = ({ getState }) => (next) => (action) => {\n  const prevState = getState().main\n  const returnValue = next(action)\n  console.group(`%c react-context-hook`, 'font-weight: bold')\n  console.info(\n    `%c ${'PREV STATE'} `,\n    'background: #00e5a0;font-weight: bold',\n    prevState\n  )\n  console.info(\n    `%c ${'ACTION'} %c ${action.type}`,\n    'background: yellow;font-weight: bold',\n    'font-weight: bold;',\n    action.payload.key || '',\n    action.payload.value || action.payload\n  )\n  console.info(\n    `%c ${'NEXT STATE'} `,\n    'background: #00cbff;font-weight: bold',\n    getState().main\n  )\n  console.groupEnd()\n  return returnValue\n}\n\nexport const listernerMiddleware = (listener) => ({ getState }) => (next) => (\n  action\n) => {\n  const { key } = action.payload\n  const prevValue = getState().main[key]\n  const value = next(action)\n  const nextValue = getState().main[key]\n  listener(getState().main, key, prevValue, nextValue)\n  return value\n}\n","import { createStore, applyMiddleware } from 'redux'\nimport rootReducer from './reducer'\nimport { logger, listernerMiddleware } from './middleware'\n\nexport default function storeCreator(initialValue = {}, config = {}) {\n  const { logging, listener } = config\n\n  const middlewares = [\n    listener && listernerMiddleware(listener),\n    logging && logger\n  ].filter(Boolean)\n\n  return createStore(\n    rootReducer,\n    { main: initialValue },\n    applyMiddleware(...middlewares)\n  )\n}\n","import { SET_VALUE, REMOVE_VALUE, RESET } from './actionTypes'\n\nexport const setStoreValueAction = (key, value) => ({\n  type: SET_VALUE,\n  payload: {\n    key,\n    value\n  }\n})\n\nexport const deleteStoreValueAction = (key) => ({\n  type: REMOVE_VALUE,\n  payload: {\n    key\n  }\n})\n\nexport const resetStoreWithValue = (state = {}) => ({\n  type: RESET,\n  payload: state\n})\n","import {\n  resetStoreWithValue,\n  setStoreValueAction,\n  deleteStoreValueAction\n} from './redux/actions'\n\nexport function createRawStore(store) {\n  return {\n    /**\n     * Resets the state to the given input.\n     *\n     * @param {Object} state the new value to reset the state to.\n     */\n    reset: function (state) {\n      store.dispatch(resetStoreWithValue(state))\n    },\n    /**\n     * Sets the specified key in the store. This function is equivaluent to the `useSetStoreValue` hook.\n     *\n     * @param {string} key the property to set in the store\n     * @param {Object} value the value of the property\n     */\n    set: function (key, value) {\n      store.dispatch(setStoreValueAction(key, value))\n    },\n    /**\n     * delete the specified key from the store. This function is equivaluent to the `useDeleteStoreValue` hook.\n     *\n     * @param {string} key the property to set in the store\n     */\n    delete: function (key) {\n      store.dispatch(deleteStoreValueAction(key))\n    },\n    /**\n     * @returns the global state value of the store\n     */\n    getState: function () {\n      return store.getState().main\n    }\n  }\n}\n","export default {}\n","import React from 'react'\nimport StoreContext from './StoreContext'\nimport createStore from './redux/store'\nimport { createRawStore } from './rawStore'\nimport defaultConfig from './defaultConfig'\n\n/**\n * This store can be used outside of React components.\n */\nlet rawStore = createRawStore(createStore())\n\n/**\n * @param {ReactElement} WrappedComponent the component to connect with the store\n * @param {Object} initialValue an Object that will be the initial store value, or nothing\n * @param {Object} config the custom configuration. If nothing is passed, the default config will be used.\n * @param {Function} config.listener a function that is triggered each time the global state is modified. This function takes these parameters: (state, key, prevValue, nextValue). `state` is the value of the new state, `key` is the key that changed, `prevValue` is the old value of the key, `nextValule` is the new one.\n * @param {boolean} config.logging - default `false` - if true it will log changes to console\n * @example\n *const initialState = { count: 10 }\n *\n *const storeConfig = {\n *  listener: (state, key, prevValue, nextValue) => {\n      console.log(`the key \"${key}\" changed in the store`)\n      console.log('the old value is', prevValue)\n      console.log('the current value is', nextValue)\n      console.log('the state is', state)\n    },\n *  logging: process.env.NODE_ENV !== 'production'\n *}\n *\n *export default withStore(App, initialState, storeConfig)\n */\nexport const withStore = (WrappedComponent, initialValue, config) => {\n  const userConfig = Object.freeze({ ...defaultConfig, ...config })\n  const store = createStore(initialValue, userConfig)\n  rawStore = createRawStore(store)\n  return function (props) {\n    return (\n      <StoreContext.Provider value={{ store }}>\n        <WrappedComponent {...props} />\n      </StoreContext.Provider>\n    )\n  }\n}\n\nexport { rawStore }\n","class Subscription {\n  constructor(store, onStateChange) {\n    this.store = store\n    // this.handleChangeWrapper = this.handleChangeWrapper.bind(this)\n    this.unsuscribeFromSubscription = null\n    this.onStateChange = onStateChange.bind(this)\n  }\n\n  subscribe() {\n    this.unsuscribeFromSubscription = this.store.subscribe(this.onStateChange)\n  }\n\n  unsubscribe() {\n    this.unsuscribeFromSubscription()\n    this.unsuscribeFromSubscription = null\n  }\n}\n\nexport default Subscription\n","import { useContext, useReducer, useMemo, useRef, useEffect } from 'react'\nimport StoreContext from './StoreContext'\nimport Subscription from './redux/util/Subscription'\nimport { setStoreValueAction, deleteStoreValueAction } from './redux/actions'\n\nfunction equalityFn(a, b) {\n  return a === b\n}\n\nfunction useSelector(stateSelectorFn) {\n  const [, forceRender] = useReducer((s) => s + 1, 0)\n  const { store } = useContext(StoreContext)\n  const latestStateSelectorFn = useRef()\n  const latestSelectedState = useRef()\n  function checkForUpdates() {\n    try {\n      const newSelectedState = latestStateSelectorFn.current(\n        store.getState().main\n      )\n\n      if (equalityFn(newSelectedState, latestSelectedState.current)) {\n        return\n      }\n\n      latestSelectedState.current = newSelectedState\n    } catch (err) {\n      // ignore all errors\n    }\n\n    forceRender({})\n  }\n  const subscription = useMemo(() => new Subscription(store, checkForUpdates), [\n    store,\n    checkForUpdates\n  ])\n\n  let resultValue\n\n  if (stateSelectorFn !== latestStateSelectorFn.current) {\n    resultValue = stateSelectorFn(store.getState().main)\n  } else {\n    resultValue = latestSelectedState.current\n  }\n\n  useEffect(() => {\n    latestStateSelectorFn.current = stateSelectorFn\n    latestSelectedState.current = resultValue\n  })\n\n  useEffect(() => {\n    subscription.subscribe()\n    checkForUpdates()\n\n    return () => subscription.unsubscribe()\n  }, [store, subscription])\n\n  return resultValue\n}\n\n/**\n * `useStore` is a React Hook that access a value stored in the application global store. It returns the value, a function to update it (like React.useState) and a function to delete it.\n *\n * @param {string} key - The lookup key to find the saved value in the store\n * @param {any} defaultValue - The value if the value in the store is missing\n *\n * @returns {array} an array with length 3:<br>\n * position 0 - the value of the data in the store.<br>\n * position 1 - a function *setValue* to modify the data in the store. When used, this function return a promise that resolve nothing, thus you can use `setValue('a value').then(() => {doSomething() //when the store did update})`<br>\n * position 2 - a function *deleteValue* to delete the value from the store. When used, this function return a promise that resolve nothing, thus you can use `deleteValue('a value').then(() => {doSomething() //when the store did update})`\n *\n * @example\n * import {useStore} from 'react-context-hook'\n * const [username, setUsername, deleteUsername] = useStore('username')\n * <div>hello {username}</div>\n * <button onClick={()=> setUsername('my_username')}>set username</button>\n *\n */\nfunction useStore(key, defaultValue) {\n  return [\n    useStoreValue(key, defaultValue),\n    useSetStoreValue(key),\n    useDeleteStoreValue(key)\n  ]\n}\n\n/**\n * Returns a function to set or update a variable in the store. You want to use this hook when you just need to modify the store, not read or delete a value from it.\n * @param {string} key - the name of the variable to set in the store\n * @returns {Function} - a function to set a variable in the store with the given name When used, this function return a promise that resolve nothing, thus you can use `setValue('a value').then(() => {doSomething() //when the store did update})`\n *\n * @example\n * import {useSetStoreValue} from 'react-context-hook'\n * const setUsername = useSetStoreValue('username')\n * <button onClick={()=> setUsername('my_username')}>set username</button>\n */\nfunction useSetStoreValue(key) {\n  const { store } = useContext(StoreContext)\n  return function (value) {\n    store.dispatch(setStoreValueAction(key, value))\n  }\n}\n\n/**\n * Returns a function to delete a variable in the store. You want to use this hook when you just need to delete a value in the store, not read or set a value from it.\n * @param {string} key - the name of the variable to set in the store\n * @returns {Function} - a function to delete a variable in the store with the given name. When used, this function return a promise that resolve nothing, thus you can use `deleteValue('a value').then(() => {doSomething() //when the store did update})`\n *\n * @example\n * import {useDeleteStoreValue} from 'react-context-hook'\n * const deleteUsername = useDeleteStoreValue('username')\n * <button onClick={()=> deleteUsername('my_username')}>set username</button>\n */\nfunction useDeleteStoreValue(key) {\n  const { store } = useContext(StoreContext)\n  return function (value) {\n    store.dispatch(deleteStoreValueAction(key, value))\n  }\n}\n\n/**\n *This React hook returns an array to read and modify a value in the store:\n * `const [value, setValue] = useGetAndSet('a_lookup_key_in_the_store')`. The name of the variable in the arry is arbitrary and you can choose any string you like.\n * @param {string} key - The lookup key to find the saved value in the store\n * @param {any} defaultValue - The default value if missing\n * @returns {array} an array with length 2:<br>\n * position 0 - the value of the data in the store.<br>\n * position 1 - a function *setValue* to modify the data in the store. When used, this function return a promise that resolve nothing, thus you can use `setValue('a value').then(() => {doSomething() //when the store did update})`<br>\n *\n * @example\n * import {useGetAndSet} from 'react-context-hook'\n * const [username, setUsername] = useGetAndSet('username')\n * <div>hello {username}</div>\n * <button onClick={()=> setUsername('my_username')}>set username</button>\n *\n *  const [value, setValue] = useGetAndSet('a_lookup_key_in_the_store')\n *\n */\nfunction useGetAndSet(key, defaultValue) {\n  return [useStoreValue(key, defaultValue), useSetStoreValue(key)]\n}\n\n/**\n *This React hook returns an array to read and delete a value in the store:\n * `const [value, deleteValue] = useGetAndDelete('a_lookup_key_in_the_store')`. The name of the variable in the arry is arbitrary and you can choose any string you like.\n * @param {string} key - The lookup key to find the saved value in the store\n *\n * @returns {array} an array with length 2:<br>\n * position 0 - the value of the data in the store.<br>\n * position 1 - a function *deleteValue* to delete the data in the store. When used, this function return a promise that resolve nothing, thus you can use `deleteValue('a value').then(() => {doSomething() //when the store did update})`<br>\n *\n * @example\n * import {useGetAndDelete} from 'react-context-hook'\n * const [username, deleteUsername] = useGetAndDelete('username')\n * <div>hello {username}</div>\n * <button onClick={()=> deleteUsername('my_username')}>set username</button>\n *\n */\nfunction useGetAndDelete(key) {\n  return [useStoreValue(key), useDeleteStoreValue(key)]\n}\n\n/**\n *This React hook returns an array to set and delete a value in the store:\n * `const [setValue, deleteValue] = useGetAndDelete('a_lookup_key_in_the_store')`. The name of the variable in the arry is arbitrary and you can choose any string you like.\n * @param {string} key - The lookup key to find the saved value in the store\n *\n * @returns {array} an array with length 2:<br>\n * position 0 - a function *setValue* to modify the data in the store. When used, this function return a promise that resolve nothing, thus you can use `setValue('a value').then(() => {doSomething() //when the store did update})`<br>\n * position 1 - a function *deleteValue* to delete the data in the store. When used, this function return a promise that resolve nothing, thus you can use `deleteValue('a value').then(() => {doSomething() //when the store did update})`<br>\n *\n * @example\n * import {useGetAndDelete} from 'react-context-hook'\n * const [username, deleteUsername] = useGetAndDelete('username')\n * <div>hello {username}</div>\n * <button onClick={()=> deleteUsername('my_username')}>set username</button>\n *\n */\nfunction useSetAndDelete(key) {\n  return [useSetStoreValue(key), useDeleteStoreValue(key)]\n}\n\n/**\n *\n * @param {string} key - the name of the variable / value to be retrieved in the global store.\n * @param {any} [defaultValue] - an optional default value, if the value in the global store is not present.\n *\n * @returns {any} the value on the global store, or the default value if passed, or `undefined`\n */\nfunction useStoreValue(key, defaultValue) {\n  function stateSelector(state) {\n    return state[key]\n  }\n  const storeValue = useSelector(stateSelector)\n  return storeValue !== undefined ? storeValue : defaultValue\n}\n\n/**\n * Returns the whole store value, with all the variables stored in it. Changes to this object will not change the store\n *\n * @returns {object} - An object representing the whole store value in read only mode.\n *\n * @example\n * import {useStoreState} from 'react-context-hook'\n * const store = useStoreState()\n * console.log('the store is', JSON.stringify(store))\n */\nfunction useStoreState() {\n  function stateSelector(state) {\n    return state\n  }\n  return useSelector(stateSelector)\n}\n\nexport {\n  useStore,\n  useStoreState,\n  useStoreValue,\n  useSetStoreValue,\n  useDeleteStoreValue,\n  useGetAndSet,\n  useGetAndDelete,\n  useSetAndDelete\n}\n"],"names":["React","createContext","SET_VALUE","REMOVE_VALUE","RESET","mainReducer","state","action","type","payload","key","value","newState","combineReducers","main","logger","getState","next","prevState","returnValue","console","group","info","groupEnd","listernerMiddleware","listener","prevValue","nextValue","storeCreator","initialValue","config","logging","middlewares","filter","Boolean","createStore","rootReducer","applyMiddleware","setStoreValueAction","deleteStoreValueAction","resetStoreWithValue","createRawStore","store","reset","dispatch","set","rawStore","withStore","WrappedComponent","userConfig","Object","freeze","defaultConfig","props","Subscription","onStateChange","unsuscribeFromSubscription","bind","subscribe","equalityFn","a","b","useSelector","stateSelectorFn","useReducer","s","forceRender","useContext","StoreContext","latestStateSelectorFn","useRef","latestSelectedState","checkForUpdates","newSelectedState","current","err","subscription","useMemo","resultValue","useEffect","unsubscribe","useStore","defaultValue","useStoreValue","useSetStoreValue","useDeleteStoreValue","useGetAndSet","useGetAndDelete","useSetAndDelete","stateSelector","storeValue","undefined","useStoreState"],"mappings":"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"}